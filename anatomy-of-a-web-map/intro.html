<!DOCTYPE html>
<html xmlns:http="http://www.w3.org/1999/xhtml"><head><title></title><meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="stylesheet" href="http://use.typekit.net/c/77b798/1w;futura-pt,2,SHB:N:n3,Y5K:N:n4,SH5:N:n7/d?3bb2a6e53c9684ffdc9a9af1195b2a62d69a4fbfbedecc7b6a1ca4a2f46bef6bb5fad363ffcea1fdab03b68cc2a9a64877946bd23d5b7d0eca4a113c42f2bbe7388d1a69a059b98f0f">
    <link rel="stylesheet" href="opengisch-big.css">
    <script type='text/javascript' src="big.js"></script></head><body>
<div><img src="images/copyrighted/openGIS-logo.svg"><em>Anatomy of a Web Map</em></div>
<div class="green_text"><img src="images/copyrighted/thinking.jpg"/><a href="http://berna.io">Marco Bernasocchi</a>
<br/>MSc in GIS @ UNIZH
<br/>Developer, Consultant, Teacher & foremost Tinkerer
<br/>Skier, Climber, Diver
</div>
<div><img src="images/copyrighted/27summits-17.jpeg"/>
    <br/><br/><br/><br/>
    <a href="http://twitter.com/mbernasocchi">@mbernasocchi</a><br/><a href="mailto:marco@opengis.ch">marco@opengis.ch</a></div>
<div>
    <br/>
    <img src="images/copyrighted/openGIS-Text.svg"/>
    <br/>
    <br/>
    <em>MARCO BERNASOCCHI</em> - QGIS on android<br/>
    <br/>
    <em>MATTHIAS KUHN</em> - QGIS core committer<br/>
    <br/>
    Developers, Consultants and Teachers for C++, Python, Web, QGIS, Android, ...
</div>
<div><a href="http://berna.io/anatomy-of-a-web-map/">berna.io/anatomy-of-a-web-map</a><br/>Links are in blue boxes, <em>blue</em> is just emphasis.</div>
<div>We <em>l[i|o]ve</em> open source.<br/>Reuse and edit this presentation on <a href="https://github.com/mbernasocchi/anatomy-of-a-web-map/">github</a></div>
<div>Please <em>do</em> ask questions</div>
<div>Now let's get started</div>
<div>Today we will be talking about the <em>very most basic principles</em> of web mapping.</div>
<div>Including a <em>little history</em>, so you can get an idea of how web maps have come to be.</div>
<div>There are always <em>exceptions!</em> We'll talk about those too (Tomorrow).</div>
<div>We'll talk a lot about <em>Google</em>, but we're going to show you a <em>100% open source</em> Google-free stack</div>
<div>But first, what does <em>anatomy</em> have to do with a <em>web map</em>?</div>
<div>Well, both bodies and web maps have <em>components and systems</em> that <em>interact and intertwine.</em></div>
<div><img src="images/0-anatomy-dude/anatomy1.png"></div>
<div><img src="images/0-anatomy-dude/anatomy2.png"></div>
<div><img src="images/0-anatomy-dude/anatomy3.png"></div>
<div><img src="images/0-anatomy-dude/anatomy4.png"></div>
<div>Instead of cells, maps have <em>data.</em></div>
<div>Instead of systems, web maps have <em>styles, tiles and servers.</em></div>
<div>What is a web map?</div>
<div>How is a <em>web map</em> different than a <em>digital map</em>?</div>
<div><em>Digital</em>: involves a computer, but <em>might not be accessible</em> by the internet.</div>
<div>A <em>web map</em> is a kind of <em>digital map</em>. And both are obviously quite different from <em>analog</em> maps, such as paper maps and atlases!</div>
<div>We're talking about web maps that you <em>view in a browser</em>, like...</div>
<div><img src="images/osm.png"><a href="http://www.openstreetmap.org/">OpenStreetMap.org</a></div>
<div><img src="images/google-map.png"><a href="https://www.google.com/maps/preview">maps.google.com</a></div>
<div><img src="images/mapsdotstamen.png"><a href="http://maps.stamen.com">maps.stamen.com</a></div>
<div><img src="images/admin-ch.png"><a href="http://map.geo.admin.ch">map.geo.admin.ch</a></div>
<div><img src="images/iphone_maps.jpg">Making maps for <em>mobile devices</em> can be similar, but we're not talking about that today.</div>
<div><img src="images/google-earth.png">We're also not talking about <em>digital globes</em> like <a href="http://www.google.com/earth/">Google Earth</a></div>
<div>but how about a little history:<br/><em>How did web maps come to be?</em></div>
<div style="color: black"><img src="images/3-map-history/1-arcGIS.jpg">First, there were digital maps like <a href="http://www.esri.com/software/arcgis">ArcGIS</a>.</div>
<div>Although useful, GIS for the Web is not user friendly :( </div>
<div style="color: black"><img src="images/3-map-history/2-Ridgefield-CT-Mapquest-out.jpg">In 1996, Mapquest launched its web service.</div>
<div><img src="images/3-map-history/2-Ridgefield-CT-Mapquest-out.jpg"> <em>ta da!</em></div>
<div>Directions! Online! Revolutionary!</div>
<div>The problem: it was slow to load :(</div>
<div>MapQuest required a <em>full page refresh to scroll or zoom</em>, and was always aligned to tile boundaries.</div>
<div>Google Maps really paved the way for online mapping, beginning in <em>2005</em>.</div>
<div><img src="images/3-map-history/3-old-google-maps-1.JPG"></div>
<div><em>But what was the revolution?</em><br/>Was it the interface?<br/>The red marker?<br/>The weather widget?</div>
<div>No!</div>
<div>It was the <em>tile. <img src="images/tiles/toner.jpg"></em></div>
<div>Let's talk about <em>tiles</em> for a minute.</div>
<div>All tiles = same size!<br/>256x256 pixels<br/>same boundaries<img src="images/tiles.gif"></div>
<div>Tiles could be a road map, a satellite image, or anything else that's a <em>raster</em>!</div>
<div><img src="images/tiles-loading.gif">All these little tiles load <em>way faster</em> than one big map.</div>
<div>Web maps like this load the tiles that are on your screen. If the map is <em>smart</em>, it will <em>pre-load tiles</em> outside of the screen, along the top, bottom, left, and right.</div>
<div><img src="images/slippy-map.gif">This kind of map is colloquially called a <em>slippy map</em></div>
<div>Each <em>zoom level</em> has its own set of tiles!</div>
<div><img src="images/tiles/zoom0.png"><em>Zoom level 0: one tile for the world.</em></div>
<div>With each additional zoom level, the number of tiles <em>increases exponentially</em>.</div>
<div><img src="images/tiles/zoom1.png"><em>Zoom level 1: 4 tiles for the world.</em></div>
<div><img src="images/tiles/zoom2-3-4-5.png"><em>Zoom level 2, 3, 4, 5</em></div>
<div><img src="images/tiles/zoom13.png"><em>Zoom level 13</em></div>
<div>Tiles are <em>rendered</em> in advance (usually) then stored in a cache</div>
<div>Map tiles are <em>just images</em> on the web, so you can link to them individually.</div>
<div>For example: <a href="http://tile.openstreetmap.org/4/2/6.png">http://tile.openstreetmap.org/4/2/6.png</a></div>
<div>In order to understand how this works, let's break down the URL.</div>
<div>http://<em>tile.openstreetmap.org</em>/4/2/6.png -- <br/>Name of the tile server.</div>
<div>http://tile.openstreetmap.org/<em>4</em>/2/6.png -- <br/>Z value, or the zoom level.</div>
<div>http://tile.openstreetmap.org/4/<em>2/6</em>.png -- <br/>X/Y value, or the place in the grid where the tile lives.</div>
<div>Google maps use <em>Mercator projection</em>, which is designed for sailors BUT it works well for flat maps.</div>
<div><a href="http://commons.wikimedia.org/wiki/File:1855_Colton_Map_of_the_World_on_Mercator_Projection_-_Geographicus_-_WorldMercator-colton-1855.jpg"><img src="images/mercator.jpg"></a></div>
<div>We'll see more map projections later...!</div>
<div>Anyway, most followed Google's lead, with tiles at the base.</div>
<div>Not surprisingly, a collection of <em>raster</em> tiles makes up what we call the map's <em>base layer.</em></div>
<div>When we layer things like markers on top of them, we call those <em>data layers</em> or <em>content layers</em> or <em>feature layers</em>.</div>
  <div>*(Not every web map contains a feature layer, but they are fairly typical.)</div>
<div>They are often <em>vector</em> layers (point, line, polygon). Sometimes you can <em>interact</em> with them.</div>
<div>Filetypes: GIS uses <em>shapefiles</em>, but web maps prefer <em>KML</em>, or more recently, <a href="http://github.com/lyzidiamond/learn-geojson">GeoJSON</a></div>
<div>Here's the breakdown of how these pieces fit together:</div>
<div><img src="images/basemap-datalayers-01.png"></div>
<div><img src="images/basemap-datalayers-02.png"></div>
<div><img src="images/basemap-datalayers-03.png"></div>
<div><img src="images/basemap-datalayers-04.png"></div>
<div><img src="images/basemap-datalayers-05.png"></div>
<div>Make sense?</div>
<div>Great!</div>


<div>Digression: what is <em>GeoJSON</em>?</div>
<div><em>GeoJSON:</em> geographic data format. (Contains spatial information.)</div>
<div><em>GeoJSON:</em> extension of JSON, with a specific structure.</div>
<div><img src="images/geojson.png"><br/><br/><br/><br/><br/><em>This is what it looks like</em></div>
<div><em>GeoJSON:</em> has room for nested attribute information.</div>
<div><em>GeoJSON:</em> loved by web mapping libraries.</div>
<div>Also, there's a cool tool for editing <em>GeoJSON</em>called <em>geojson.io</em>!</div>
<div>Digression: what is <em>git</em>?</div>
<div><em>git:</em> distributed version control system.</div>
<div><em>git:</em> allows for collaboration without totally screwing everything up.</div>
<div><em>git:</em> super powerful.</div>
<div>Digression: what is <em>GitHub</em>?</div>
<div><em>GitHub:</em> a home for lots and lots of code repositories.</div>
<div><em>GitHub:</em> interacted with using <em>git</em>.</div>
<div><em>GitHub:</em> provides easy-to-use tools and tutorials for using and learning git to collaborate on and contribute to projects.</div>
<div><em>GitHub:</em> best friends with <em>GeoJSON</em>! <a href="https://github.com/mbernasocchi/anatomy-of-a-web-map/blob/gh-pages/27summits.geojson">(Renders in a map.)</a></div>
<div>/digression<br/>/digression<br/>/digression<br/></div>




<div>Now we're ready to dive a little deeper into the whole <em>web map anatomy!</em></div>
<div><img src="images/leaflet-toner-snapshot-giant.png"><em>The simplest possible web map:</em> <a href="http://bit.ly/1RS5Ewc">bit.ly/1RS5Ewc</a></div>
<div><img src="images/code-1.png"></div>
<div><img src="images/code-2.png"></div>
<div><img src="images/anatomy-of-a-web-map.png"></div>
<div>What does the javascript library do? <em>Grabs</em> the tiles, <em>adds</em> content layer, <em>handles</em> interaction.</div>
<div>The javascript: we recommend <a href="http://leafletjs.com">Leaflet</a>, although there are others: <a href="http://openlayers.org">OpenLayers</a> (which is making a comeback) / <a href="http://modestmaps.com">Modest Maps</a> / <a href="http://polymaps.org">Polymaps</a></div>
<div>And don't forget: <a href="https://developers.google.com/maps/documentation/javascript/">Google Maps API</a> / <a href="http://www.microsoft.com/maps/choose-your-bing-maps-API.aspx">Bing Maps API</a> / <a href="http://developer.here.com/web/guest/javascript-apis">Nokia HERE Maps API</a> / <a href="https://developers.arcgis.com/en/javascript/">ESRI ArcGIS API</a></div>
<div>SAAS:<br/><a href="http://mapbox.com">mapbox</a> <a href="https://cartodb.com">cartoDB</a></div>
<div><img src="images/27.png" /></div>
<div>So.<br/>Where do I start?</div>
<div>Do I need to make my own custom tiles?</div>
<div>No? Use these! <a href="http://wiki.openstreetmap.org/wiki/Tiles">OpenStreetMap</a>, <a href="http://cloudmade.com/products/map-tiles">CloudMade</a>, <a href="http://maps.stamen.com">Stamen</a>, <a href="https://www.mapbox.com/tour/#maps">MapBox</a>, <a href="http://developer.mapquest.com/web/products/open/map">MapQuest</a></div>
<div>Digression: WM(T)S, WFS and co.</div>
<div><h1>OGC Standards recap</h1><img src="images/ogc-standards.jpg"/></div>
<div><em>WM(T)S</em><br/>standard protocol for serving pre-rendered georeferenced map (tiles) over the Internet</div>
<div><em>WM(T)S - GetCapabilities</em><br/>returns parameters about the WMS and the available layers</div>
<div><em>WM(T)S - GetMap</em><br/>returns a map image/tile.</div>
<div><em>TMS</em><br/>specification for tiled web maps. Requires a URI structure which attempts to fulfill REST principles</div>
<div><img src="images/tms-xyz.png"/><br/><br/><br/><br/><br/><em>TMS vs XYZ (Google/Bing/OSM)</em></div>
<div><em>WFS</em><br/>Interfaces for describing data manipulation operations of geographic features.
    Allows <em>querying</em> and <em>retrieval</em> of features.</div>
<div><em>WFS-T</em><br/>Transactional WFS allows <em>creation</em>, <em>deletion</em>, and <em>updating</em> of features.</div>
<div>Do I need to make my own custom tiles?</div>
<div>Yes? Use <a href="https://www.mapbox.com/tilemill/">TileMill</a>/<a href="https://www.mapbox.com/tilemill/">Mapbox studio</a> to design your own tiles.</div>
<div><img src="images/worldwide-wood.png"> <em>Pretty!</em></div>
<div>Style your map with <a href="https://www.mapbox.com/carto">CartoCSS</a> (or just carto)</div>
<div>You can host these files on <a href="https://www.mapbox.com/plans/">MapBox</a>, or...</div>
<div>Serve the tiles by running your own tile server. For example: <a href="https://github.com/klokantech/tileserver-php/">TileServer.php</a> / <a href="http://tilestache.org">TileStache</a> / <a href="http://tilecache.org">TileCache</a> / <a href="https://github.com/mapbox/tilestream">TileStream</a> / <a href="https://github.com/chelm/mbtiles-server">mbtiles-server</a> / <a href=http://wiki.openstreetmap.org/wiki/Mod_tile">mod_tile</a></div>
<div>Do I need a content layer?</div>
<div>No? Put all your data into the tiles</div>
<div>Yes? Convert a Shapefile to GeoJSON with <a href="http://ogre.adc4gis.com/">OGR</a>, <a href="http://ogre.adc4gis.com/">OGRE</a> or write your own GeoJSON with <a href="http://geojson.io">geojson.io</a></div>
<div>Using QGIS? install QGIS2web plugin</div>
<div><img src="images/random/lurn_moar.jpg">Learn More:<br/><a href="http://maptime.io/lessons-resources/">maptime.io/lessons-resources/</a><br/><a href="http://www.e-cartouche.ch/">e-cartouche.ch/</a></div>

<div>Thanks to <a href="http://maptime.io/">#maptime</a>, <a href="https://github.com/lyzidiamond">Lyzi Diamond</a>, <a href="http://stamen.com/studio/alan">Alan McConchie</a> and <a href="http://stamen.com/studio/beth">Beth Schechter</a> for sharing their work</div>
<div><em>Questions?</em><br/><br/>Now or later<br/><br/>
    <a href="http://twitter.com/mbernasocchi">@mbernasocchi</a><br/><a href="mailto:marco@opengis.ch">marco@opengis.ch</a></div>
